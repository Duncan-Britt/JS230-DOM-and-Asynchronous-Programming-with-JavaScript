<!doctype html>
<html lang="en-US">
  <head>
    <title>On the River</title>
  </head>
  <body>
    <h1>On the River</h1>
    <p>A poem by Paul Laurence Dunbar</p>

    <p>
      The sun is low,<br>
      The waters flow,<br>
      My boat is dancing to and fro.<br>
      The eve is still,<br>
      Yet from the hill<br>
      The killdeer echoes loud and shrill.
    </p>
    <p>
      The paddles plash,<br>
      The wavelets dash,<br>
      We see the summer lightning flash;<br>
      While now and then,<br>
      In marsh and fen<br>
      Too muddy for the feet of men,
    </p>
    <p>
      Where neither bird<br>
      Nor beast has stirred,<br>
      The spotted bullfrog's croak is heard.<br>
      The wind is high,<br>
      The grasses sigh,<br>
      The sluggish stream goes sobbing by.
    </p>
    <p>
      And far away<br>
      The dying day<br>
      Has cast its last effulgent ray;<br>
      While on the land<br>
      The shadows stand<br>
      Proclaiming that the eve's at hand.
    </p>
    <script type="text/javascript">
      document.lastChild.lastChild.childNodes[1].style.color = "red";
      document.lastChild.lastChild.childNodes[1].style.fontSize = "48px";

      function walk(node, func) {
        const branches = node.childNodes
        func(node)
        for (let i = 0; i < branches.length; i++) {
          walk(branches[i], func)
        }
      }

      let pCount = 0;

      walk(document.body, node => {
        node instanceof HTMLParagraphElement ? pCount++ : null
      });

      console.log(pCount);

      const firstWords = [];

      walk(document.body, node => {
        if (node instanceof HTMLParagraphElement) {
          firstWords.push(
            // node.textContent.match(/\b\w+\b/)[0]
            node.childNodes[0].data.match(/\b\w+\b/)[0]
          )
        }
      });

      console.log(firstWords);

      (function restyle() {
        let node = document.body
        Array.from(node.childNodes).slice(2).forEach(child => {
          if (child instanceof HTMLParagraphElement) {
            child.classList.add("stanza");
          }
        });
      }());
    </script>
  </body>
</html>
